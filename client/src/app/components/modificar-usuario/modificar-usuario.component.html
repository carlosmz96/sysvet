<p-confirmDialog #cd [style]="{width: '20em'}" [closable]="false">
  <ng-template pTemplate="footer">
    <button type="button" (click)="cd.accept()" class="btn btn-success"><i class="pi pi-check"></i> Si</button>
    <button type="button" (click)="cd.reject()" class="btn btn-danger"><i class="pi pi-times"></i> No</button>
  </ng-template>
</p-confirmDialog>

<p-toast></p-toast>

<app-navegacion></app-navegacion>

<div class="container">
  <div class="card mx-auto shadow p-3 mb-5 bg-white rounded modificar-usuario">
    <div class="card-body" style="text-align: justify;">
      <form #editUserForm="ngForm" (ngSubmit)="onSubmit()" class="formulario-modificacion-usuario">
        <h1>Editar datos</h1>
        <p>En este apartado podrás modificar tus datos personales, incluyendo tu contraseña y foto de perfil.</p>
        <hr>
        <div class="form-group row">
          <label for="nombre" class="col-sm-4 col-form-label"><strong>Nombre</strong></label>
          <div class="col-sm-8">
            <input type="text" #nombre="ngModel" name="nombre" id="nombre" [(ngModel)]="usuario.nombre"
              class="form-control" placeholder="Introduce tu nombre" maxlength="25" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="apellidos" class="col-sm-4 col-form-label"><strong>Apellidos</strong></label>
          <div class="col-sm-8">
            <input type="text" #apellidos="ngModel" name="apellidos" id="apellidos" [(ngModel)]="usuario.apellidos"
              class="form-control" placeholder="Introduce tus apellidos" maxlength="50" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="email" class="col-sm-4 col-form-label"><strong>Correo electrónico</strong></label>
          <div class="col-sm-8">
            <input type="email" #email="ngModel" name="email" id="email" [(ngModel)]="usuario.email"
              class="form-control" placeholder="Introduce tu correo electrónico" maxlength="60" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="password" class="col-sm-4 col-form-label"><strong>Contraseña</strong></label>
          <div class="col-sm-8">
            <input type="password" #password="ngModel" name="password" id="password" [(ngModel)]="usuario.pass"
              class="form-control" placeholder="Introduce tu contraseña">
          </div>
        </div>
        <div class="form-group row">
          <label for="password2" class="col-sm-4 col-form-label"><strong>Nueva contraseña</strong></label>
          <div class="col-sm-8">
            <input type="password" #password2="ngModel" name="password2" id="password2" [(ngModel)]="newPass"
              class="form-control" placeholder="Introduce tu nueva contraseña">
          </div>
        </div>
        <div class="form-group row">
          <label for="telefono" class="col-sm-4 col-form-label"><strong>Teléfono</strong></label>
          <div class="col-sm-8">
            <input type="text" #telefono="ngModel" name="telefono" id="telefono"
              (keypress)="($event.charCode >= 48 && $event.charCode <= 57)" [(ngModel)]="usuario.telefono"
              class="form-control" maxlength="9" placeholder="Introduce tu teléfono">
          </div>
        </div>
        <div class="form-group row">
          <label for="direccion" class="col-sm-4 col-form-label"><strong>Dirección</strong></label>
          <div class="col-sm-8">
            <input type="text" #direccion="ngModel" name="direccion" id="direccion" [(ngModel)]="usuario.direccion"
              class="form-control" placeholder="Introduce tu dirección">
          </div>
        </div>
        <hr>
        <div class="apartado-imagen">
          <div class="recuadro-imagen">
            <img class="imagen-perfil-usuario" src="{{ url + 'obtener-foto-perfil/' + usuario.foto }}"
              alt="Imagen de perfil del usuario">
          </div>
          <div class="botonera-imagen-usuario">
            <span *ngIf="foto && !fotoCambiada">Archivo a subir: {{foto.name}}</span>
            <label for="subir" class="btn btn-success btn-block subir-foto">Subir foto de perfil</label>
            <input type="file" id="subir" style="display: none;" (change)="fileChoosen($event)">
            <button type="button" class="btn btn-danger eliminar-foto" (click)="eliminarFotoPerfil()">Eliminar foto de
              perfil</button>
          </div>
        </div>
        <hr>
        <div class="btn-submit">
          <button type="button" class="btn btn-danger" [routerLink]="['/usuario', usuario.dni]"><i
              class="fas fa-arrow-circle-left" style="margin-right: 0.1em;"></i> Volver</button>
          <button type="submit" class="btn btn-success success"><i class="fas fa-check-circle"
              style="margin-right: 0.1em;"></i> Confirmar cambios</button>
        </div>
      </form>
    </div>
  </div>
</div>
